{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/request.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/table\";\nexport class RequestListComponent {\n  constructor(requestService, snackbar, dialog) {\n    this.requestService = requestService;\n    this.snackbar = snackbar;\n    this.dialog = dialog;\n    this.displayedColumns = ['id', 'route', 'drugs', 'view', 'delete'];\n    this.requests = [];\n    this.element = {};\n    this.dataSource = new MatTableDataSource(this.requests);\n  }\n  ngOnInit() {\n    this.updateData();\n  }\n  updateData() {\n    this.requestService.getRequests().subscribe({\n      next: requests => {\n        console.log(requests);\n        this.requests = requests;\n        this.dataSource.data = this.requests;\n      },\n      error: e => {\n        this.snackbar.open('Error getting the solicitudes ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  delete(id) {\n    this.requestService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: e => {\n        this.snackbar.open('Error deleting the solicitud ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  confirmDeletion(id) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: {\n        title: 'Solicitud ' + id\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n  static #_ = this.ɵfac = function RequestListComponent_Factory(t) {\n    return new (t || RequestListComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.MatDialog));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RequestListComponent,\n    selectors: [[\"app-request-list\"]],\n    decls: 32,\n    vars: 8,\n    consts: [[3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"matHeaderCellDef\", \"\"], [\"matCellDef\", \"let element\", 3, \"title\"], [\"matColumnDef\", \"route\"], [\"matColumnDef\", \"drugs\"], [\"matColumnDef\", \"view\"], [\"matCellDef\", \"let element\"], [\"mat-icon-button\", \"\", \"title\", \"View/edit solicitud\", 3, \"routerLink\"], [\"color\", \"primary\"], [\"matColumnDef\", \"delete\"], [\"mat-icon-button\", \"\", \"title\", \"Delete solicitud\", 3, \"click\"], [\"matHeaderRowDef\", \"displayedColumns\"], [\"matRowDef\", \"let row; columns: displayedColumns;\"]],\n    template: function RequestListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-table\", 0);\n        i0.ɵɵelementContainerStart(1, 1);\n        i0.ɵɵelementStart(2, \"mat-header-cell\", 2);\n        i0.ɵɵtext(3, \" ID \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"mat-cell\", 3);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(6, 4);\n        i0.ɵɵelementStart(7, \"mat-header-cell\", 2);\n        i0.ɵɵtext(8, \" Ruta \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-cell\", 3);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(11, 5);\n        i0.ɵɵelementStart(12, \"mat-header-cell\", 2);\n        i0.ɵɵtext(13, \" Medicamentos \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-cell\", 3);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 6);\n        i0.ɵɵelementStart(17, \"mat-header-cell\", 2);\n        i0.ɵɵtext(18, \" View \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"mat-cell\", 7)(20, \"a\", 8)(21, \"mat-icon\", 9);\n        i0.ɵɵtext(22, \"visibility\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(23, 10);\n        i0.ɵɵelementStart(24, \"mat-header-cell\", 2);\n        i0.ɵɵtext(25, \" Delete \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"mat-cell\", 7)(27, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function RequestListComponent_Template_button_click_27_listener() {\n          return ctx.confirmDeletion(ctx.request.id);\n        });\n        i0.ɵɵelementStart(28, \"mat-icon\", 9);\n        i0.ɵɵtext(29, \"delete\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelement(30, \"mat-header-row\", 12)(31, \"mat-row\", 13);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"title\", ctx.requests.id);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\", ctx.requests.id, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"title\", ctx.requests.route);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\", ctx.requests.route, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"title\", ctx.requests.drugs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.requests.drugs, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/requests/\", ctx.requests.id, \"\");\n      }\n    },\n    dependencies: [i4.RouterLink, i5.MatIcon, i6.MatIconAnchor, i6.MatIconButton, i7.MatTable, i7.MatHeaderCellDef, i7.MatHeaderRowDef, i7.MatColumnDef, i7.MatCellDef, i7.MatRowDef, i7.MatHeaderCell, i7.MatCell, i7.MatHeaderRow, i7.MatRow],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MatTableDataSource","ConfirmDialogComponent","RequestListComponent","constructor","requestService","snackbar","dialog","displayedColumns","requests","element","dataSource","ngOnInit","updateData","getRequests","subscribe","next","console","log","data","error","e","open","duration","complete","delete","id","deleteRequest","confirmDeletion","dialogRef","width","title","afterClosed","result","_","i0","ɵɵdirectiveInject","i1","RequestService","i2","MatSnackBar","i3","MatDialog","_2","selectors","decls","vars","consts","template","RequestListComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelementContainerStart","ɵɵtext","ɵɵelementEnd","ɵɵelementContainerEnd","ɵɵlistener","RequestListComponent_Template_button_click_27_listener","request","ɵɵelement","ɵɵproperty","ɵɵadvance","ɵɵpropertyInterpolate","ɵɵtextInterpolate1","route","drugs","ɵɵpropertyInterpolate1"],"sources":["C:\\Users\\sermv\\Desktop\\4ºIngeniería\\Web\\HWA\\frontend\\frontendAlt\\src\\app\\solicitud\\solicitud.component.ts","C:\\Users\\sermv\\Desktop\\4ºIngeniería\\Web\\HWA\\frontend\\frontendAlt\\src\\app\\solicitud\\solicitud.component.html"],"sourcesContent":["// request-list.component.ts\nimport { Component, OnInit } from '@angular/core';\nimport { RequestService } from '../services/request.service';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-request-list',\n  templateUrl: './solicitud.component.html',\n  styleUrls: ['./solicitud.component.css']\n})\nexport class RequestListComponent implements OnInit {\n\n  displayedColumns = ['id', 'route', 'drugs', 'view', 'delete'];\n  requests: any[] = [];\n  element = {};\n  dataSource = new MatTableDataSource(this.requests);\n\n  constructor(private requestService: RequestService,\n    private snackbar: MatSnackBar,\n    public dialog: MatDialog) { }\n\n  ngOnInit(): void {\n    this.updateData();\n  }\n\n  updateData() {\n    this.requestService.getRequests().subscribe({\n      next: (requests: any[]) => {\n        console.log(requests);\n        this.requests = requests;\n        this.dataSource.data = this.requests;\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error getting the solicitudes ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n  delete(id: number) {\n    this.requestService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error deleting the solicitud ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n\n  confirmDeletion(id: number) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: { title: 'Solicitud ' + id }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n}","<mat-table [dataSource]=\"dataSource\">\n\n  <ng-container matColumnDef=\"id\">\n      <mat-header-cell matHeaderCellDef> ID </mat-header-cell>\n      <mat-cell matCellDef=\"let element\" title=\"{{requests.id}}\">{{requests.id}} </mat-cell>\n    </ng-container>\n\n  <ng-container matColumnDef=\"route\">\n    <mat-header-cell matHeaderCellDef> Ruta </mat-header-cell>\n    <mat-cell matCellDef=\"let element\" title=\"{{requests.route}}\">{{requests.route}} </mat-cell>\n  </ng-container>\n\n  <ng-container matColumnDef=\"drugs\">\n    <mat-header-cell matHeaderCellDef> Medicamentos </mat-header-cell>\n    <mat-cell matCellDef=\"let element\" title=\"{{requests.drugs}}\"> {{requests.drugs}} </mat-cell>\n  </ng-container>\n\n  <ng-container matColumnDef=\"view\">\n    <mat-header-cell matHeaderCellDef > View </mat-header-cell>\n    <mat-cell matCellDef=\"let element\">\n      <a mat-icon-button title=\"View/edit solicitud\" routerLink=\"/requests/{{requests.id}}\">\n        <mat-icon color=\"primary\">visibility</mat-icon>\n      </a>\n    </mat-cell>\n  </ng-container>\n\n  <ng-container matColumnDef=\"delete\">\n    <mat-header-cell matHeaderCellDef> Delete </mat-header-cell>\n    <mat-cell matCellDef=\"let element\">\n      <button mat-icon-button title=\"Delete solicitud\" (click)=\"confirmDeletion(request.id)\">\n        <mat-icon color=\"primary\">delete</mat-icon>\n      </button>\n    </mat-cell>\n  </ng-container>\n\n  <mat-header-row matHeaderRowDef=\"displayedColumns\"></mat-header-row>\n  <mat-row matRowDef=\"let row; columns: displayedColumns;\"></mat-row>\n</mat-table>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}