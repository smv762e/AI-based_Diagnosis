{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/request.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/material/dialog\";\nexport class SolicitudComponent {\n  constructor(solicitudService, snackbar, dialog) {\n    this.solicitudService = solicitudService;\n    this.snackbar = snackbar;\n    this.dialog = dialog;\n    this.displayedColumns = ['id', 'drugs', 'id_ruta', 'view', 'delete'];\n    this.solicitudes = [];\n    this.element = {};\n    this.dataSource = new MatTableDataSource(this.solicitudes);\n  }\n  ngOnInit() {\n    this.updateData();\n  }\n  updateData() {\n    this.solicitudService.getRequests().subscribe({\n      next: solicitudes => {\n        console.log(solicitudes);\n        this.solicitudes = solicitudes;\n        this.dataSource.data = this.solicitudes;\n      },\n      error: e => {\n        this.snackbar.open('Error getting the solicitudes ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  delete(id) {\n    this.solicitudService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: e => {\n        this.snackbar.open('Error deleting the solicitud ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  confirmDeletion(id) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: {\n        title: 'solicitud ' + id\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n  static #_ = this.ɵfac = function SolicitudComponent_Factory(t) {\n    return new (t || SolicitudComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.MatDialog));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SolicitudComponent,\n    selectors: [[\"app-solicitud\"]],\n    decls: 2,\n    vars: 0,\n    template: function SolicitudComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"solicitud works!\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MatTableDataSource","ConfirmDialogComponent","SolicitudComponent","constructor","solicitudService","snackbar","dialog","displayedColumns","solicitudes","element","dataSource","ngOnInit","updateData","getRequests","subscribe","next","console","log","data","error","e","open","duration","complete","delete","id","deleteRequest","confirmDeletion","dialogRef","width","title","afterClosed","result","_","i0","ɵɵdirectiveInject","i1","RequestService","i2","MatSnackBar","i3","MatDialog","_2","selectors","decls","vars","template","SolicitudComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["C:\\Users\\sermv\\Desktop\\4ºIngeniería\\Web\\HWA\\frontend\\frontendAlt\\src\\app\\solicitud\\solicitud.component.ts","C:\\Users\\sermv\\Desktop\\4ºIngeniería\\Web\\HWA\\frontend\\frontendAlt\\src\\app\\solicitud\\solicitud.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { RequestService } from '../services/request.service';\nimport { MatTableDataSource } from '@angular/material/table';\nimport {MatSnackBar, MatSnackBarModule} from '@angular/material/snack-bar'; \nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\n@Component({\n  selector: 'app-solicitud',\n  templateUrl: './solicitud.component.html',\n  styleUrls: ['./solicitud.component.css']\n})\nexport class SolicitudComponent implements OnInit {\n  displayedColumns = ['id', 'drugs', 'id_ruta','view','delete'];\n  solicitudes: JSON[] =[];\n  element = {};\n  dataSource = new MatTableDataSource(this.solicitudes);\n\n  constructor(private solicitudService: RequestService,\n    private snackbar: MatSnackBar,\n    public dialog: MatDialog) { }\n    \n  ngOnInit(): void {  \n    this.updateData();\n  }\n\n  updateData(){\n    this.solicitudService.getRequests().subscribe ({\n      next: (solicitudes: JSON[]) => {\n        console.log(solicitudes);\n        this.solicitudes = solicitudes;\n        this.dataSource.data=this.solicitudes;\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error getting the solicitudes '+e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n  delete(id: number){\n    this.solicitudService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error deleting the solicitud '+e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n\n  confirmDeletion(id: number) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: { title: 'solicitud ' + id }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n\n}\n","<p>solicitud works!</p>\n"],"mappings":"AAEA,SAASA,kBAAkB,QAAQ,yBAAyB;AAE5D,SAASC,sBAAsB,QAAQ,4CAA4C;;;;;AAOnF,OAAM,MAAOC,kBAAkB;EAM7BC,YAAoBC,gBAAgC,EAC1CC,QAAqB,EACtBC,MAAiB;IAFN,KAAAF,gBAAgB,GAAhBA,gBAAgB;IAC1B,KAAAC,QAAQ,GAARA,QAAQ;IACT,KAAAC,MAAM,GAANA,MAAM;IAPf,KAAAC,gBAAgB,GAAG,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAC,MAAM,EAAC,QAAQ,CAAC;IAC7D,KAAAC,WAAW,GAAU,EAAE;IACvB,KAAAC,OAAO,GAAG,EAAE;IACZ,KAAAC,UAAU,GAAG,IAAIV,kBAAkB,CAAC,IAAI,CAACQ,WAAW,CAAC;EAIvB;EAE9BG,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,EAAE;EACnB;EAEAA,UAAUA,CAAA;IACR,IAAI,CAACR,gBAAgB,CAACS,WAAW,EAAE,CAACC,SAAS,CAAE;MAC7CC,IAAI,EAAGP,WAAmB,IAAI;QAC5BQ,OAAO,CAACC,GAAG,CAACT,WAAW,CAAC;QACxB,IAAI,CAACA,WAAW,GAAGA,WAAW;QAC9B,IAAI,CAACE,UAAU,CAACQ,IAAI,GAAC,IAAI,CAACV,WAAW;MACvC,CAAC;MACDW,KAAK,EAAGC,CAAM,IAAI;QAChB,IAAI,CAACf,QAAQ,CAACgB,IAAI,CAAC,gCAAgC,GAACD,CAAC,CAACD,KAAK,EAAE,EAAE,EAAE;UAC/DG,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC;MACDC,QAAQ,EAAEA,CAAA,KAAMP,OAAO,CAACC,GAAG,CAAC,MAAM;KACnC,CAAC;EACJ;EACAO,MAAMA,CAACC,EAAU;IACf,IAAI,CAACrB,gBAAgB,CAACsB,aAAa,CAACD,EAAE,CAAC,CAACX,SAAS,CAAC;MAChDC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACH,UAAU,EAAE;MACnB,CAAC;MACDO,KAAK,EAAGC,CAAM,IAAI;QAChB,IAAI,CAACf,QAAQ,CAACgB,IAAI,CAAC,+BAA+B,GAACD,CAAC,CAACD,KAAK,EAAE,EAAE,EAAE;UAC9DG,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC;MACDC,QAAQ,EAAEA,CAAA,KAAMP,OAAO,CAACC,GAAG,CAAC,MAAM;KACnC,CAAC;EACJ;EAEAU,eAAeA,CAACF,EAAU;IACxB,MAAMG,SAAS,GAAG,IAAI,CAACtB,MAAM,CAACe,IAAI,CAACpB,sBAAsB,EAAE;MACzD4B,KAAK,EAAE,OAAO;MACdX,IAAI,EAAE;QAAEY,KAAK,EAAE,YAAY,GAAGL;MAAE;KACjC,CAAC;IAEFG,SAAS,CAACG,WAAW,EAAE,CAACjB,SAAS,CAACkB,MAAM,IAAG;MACzC,IAAIA,MAAM,EAAE;QACV,IAAI,CAACR,MAAM,CAACC,EAAE,CAAC;;IAEnB,CAAC,CAAC;EACJ;EAAC,QAAAQ,CAAA,G;qBAtDU/B,kBAAkB,EAAAgC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,WAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,SAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAlBxC,kBAAkB;IAAAyC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,QAAA,WAAAC,4BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCX/Bd,EAAA,CAAAgB,cAAA,QAAG;QAAAhB,EAAA,CAAAiB,MAAA,uBAAgB;QAAAjB,EAAA,CAAAkB,YAAA,EAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}