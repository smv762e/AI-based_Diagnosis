{"ast":null,"code":"import { __decorate } from \"tslib\";\n// request-list.component.ts\nimport { Component } from '@angular/core';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nexport let RequestListComponent = class RequestListComponent {\n  constructor(requestService, snackbar, dialog) {\n    this.requestService = requestService;\n    this.snackbar = snackbar;\n    this.dialog = dialog;\n    this.displayedColumns = ['id', 'route', 'drugs', 'view', 'delete'];\n    this.requests = [];\n    this.element = {};\n    this.dataSource = new MatTableDataSource(this.requests);\n  }\n  ngOnInit() {\n    this.updateData();\n  }\n  updateData() {\n    this.requestService.getRequests().subscribe({\n      next: requests => {\n        console.log(requests);\n        this.requests = requests;\n        this.dataSource.data = this.requests;\n      },\n      error: e => {\n        this.snackbar.open('Error getting the solicitudes ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  delete(id) {\n    this.requestService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: e => {\n        this.snackbar.open('Error deleting the cuenta ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done')\n    });\n  }\n  confirmDeletion(id) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: {\n        title: 'Solicitud ' + id\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n};\nRequestListComponent = __decorate([Component({\n  selector: 'app-request-list',\n  templateUrl: './solicitud.component.html',\n  styleUrls: ['./solicitud.component.css']\n})], RequestListComponent);","map":{"version":3,"names":["Component","MatTableDataSource","ConfirmDialogComponent","RequestListComponent","constructor","requestService","snackbar","dialog","displayedColumns","requests","element","dataSource","ngOnInit","updateData","getRequests","subscribe","next","console","log","data","error","e","open","duration","complete","delete","id","deleteRequest","confirmDeletion","dialogRef","width","title","afterClosed","result","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\sermv\\Desktop\\4ºIngeniería\\Web\\HWA\\frontend\\frontendAlt\\src\\app\\solicitud\\solicitud.component.ts"],"sourcesContent":["// request-list.component.ts\nimport { Component, OnInit } from '@angular/core';\nimport { RequestService } from '../services/request.service';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-request-list',\n  templateUrl: './solicitud.component.html',\n  styleUrls: ['./solicitud.component.css']\n})\nexport class RequestListComponent implements OnInit {\n\n  displayedColumns = ['id', 'route', 'drugs', 'view', 'delete'];\n  requests: any[] = [];\n  element = {};\n  dataSource = new MatTableDataSource(this.requests);\n\n  constructor(private requestService: RequestService,\n    private snackbar: MatSnackBar,\n    public dialog: MatDialog) { }\n\n  ngOnInit(): void {\n    this.updateData();\n  }\n\n  updateData() {\n    this.requestService.getRequests().subscribe({\n      next: (requests: any[]) => {\n        console.log(requests);\n        this.requests = requests;\n        this.dataSource.data = this.requests;\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error getting the solicitudes ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n  delete(id: number) {\n    this.requestService.deleteRequest(id).subscribe({\n      next: () => {\n        this.updateData();\n      },\n      error: (e: any) => {\n        this.snackbar.open('Error deleting the cuenta ' + e.error, '', {\n          duration: 3000\n        });\n      },\n      complete: () => console.log('done'),\n    });\n  }\n\n  confirmDeletion(id: number) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '250px',\n      data: { title: 'Solicitud ' + id }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.delete(id);\n      }\n    });\n  }\n}"],"mappings":";AAAA;AACA,SAASA,SAAS,QAAgB,eAAe;AAEjD,SAASC,kBAAkB,QAAQ,yBAAyB;AAE5D,SAASC,sBAAsB,QAAQ,4CAA4C;AAQ5E,WAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EAO/BC,YAAoBC,cAA8B,EACxCC,QAAqB,EACtBC,MAAiB;IAFN,KAAAF,cAAc,GAAdA,cAAc;IACxB,KAAAC,QAAQ,GAARA,QAAQ;IACT,KAAAC,MAAM,GAANA,MAAM;IAPf,KAAAC,gBAAgB,GAAG,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC;IAC7D,KAAAC,QAAQ,GAAU,EAAE;IACpB,KAAAC,OAAO,GAAG,EAAE;IACZ,KAAAC,UAAU,GAAG,IAAIV,kBAAkB,CAAC,IAAI,CAACQ,QAAQ,CAAC;EAIpB;EAE9BG,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,EAAE;EACnB;EAEAA,UAAUA,CAAA;IACR,IAAI,CAACR,cAAc,CAACS,WAAW,EAAE,CAACC,SAAS,CAAC;MAC1CC,IAAI,EAAGP,QAAe,IAAI;QACxBQ,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC;QACrB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;QACxB,IAAI,CAACE,UAAU,CAACQ,IAAI,GAAG,IAAI,CAACV,QAAQ;MACtC,CAAC;MACDW,KAAK,EAAGC,CAAM,IAAI;QAChB,IAAI,CAACf,QAAQ,CAACgB,IAAI,CAAC,gCAAgC,GAAGD,CAAC,CAACD,KAAK,EAAE,EAAE,EAAE;UACjEG,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC;MACDC,QAAQ,EAAEA,CAAA,KAAMP,OAAO,CAACC,GAAG,CAAC,MAAM;KACnC,CAAC;EACJ;EACAO,MAAMA,CAACC,EAAU;IACf,IAAI,CAACrB,cAAc,CAACsB,aAAa,CAACD,EAAE,CAAC,CAACX,SAAS,CAAC;MAC9CC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACH,UAAU,EAAE;MACnB,CAAC;MACDO,KAAK,EAAGC,CAAM,IAAI;QAChB,IAAI,CAACf,QAAQ,CAACgB,IAAI,CAAC,4BAA4B,GAAGD,CAAC,CAACD,KAAK,EAAE,EAAE,EAAE;UAC7DG,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC;MACDC,QAAQ,EAAEA,CAAA,KAAMP,OAAO,CAACC,GAAG,CAAC,MAAM;KACnC,CAAC;EACJ;EAEAU,eAAeA,CAACF,EAAU;IACxB,MAAMG,SAAS,GAAG,IAAI,CAACtB,MAAM,CAACe,IAAI,CAACpB,sBAAsB,EAAE;MACzD4B,KAAK,EAAE,OAAO;MACdX,IAAI,EAAE;QAAEY,KAAK,EAAE,YAAY,GAAGL;MAAE;KACjC,CAAC;IAEFG,SAAS,CAACG,WAAW,EAAE,CAACjB,SAAS,CAACkB,MAAM,IAAG;MACzC,IAAIA,MAAM,EAAE;QACV,IAAI,CAACR,MAAM,CAACC,EAAE,CAAC;;IAEnB,CAAC,CAAC;EACJ;CACD;AAxDYvB,oBAAoB,GAAA+B,UAAA,EALhClC,SAAS,CAAC;EACTmC,QAAQ,EAAE,kBAAkB;EAC5BC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EACWlC,oBAAoB,CAwDhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}